<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/mrdai.css" rel="stylesheet">
    <script type="text/javascript" src="/js/jquery-2.1.1.min.js"></script>
    
    <script type="text/javascript" src="/js/syntaxhighlighters/shCore.js"></script>
    <link href="/css/syntaxhighlighters/shCore.css" rel="stylesheet" type="text/css" />
    <link href="/css/syntaxhighlighters/shThemeDefault.css" rel="stylesheet" type="text/css" />
    
    <title>安卓Activity生命周期 - Mr.Dai</title>
</head>
<body>
    <div id="main_wrapper">
    <div id="banner_wrapper">
    <h1>Mr.Dai's Blog</h1>
    </div>
    <nav id="navbar" class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">首页</a>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">分类<span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="/courses.html">本科学习</a></li>
            <li><a href="/application.html">应用开发</a></li>
            <li><a href="/algorithm.html">算法研究</a></li>
            <li><a href="/languages.html">编程语言</a></li>
            <li class="divider"></li>
            <li><a href="/mobile">切换至手机版</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
    </nav>
    <div id="content_wrapper" style="padding:20px; line-height:30px">
        <div id="right_wrapper" style="float:right; margin-left: 10px; width: 30%; font-size:15px; line-height:25px;">
            <ul id="JumpList">
                <li><h4>跳转目录</h4></li>
            </ul>
        </div>
                <h1 style="margin-top:0; font-size: 25px;"><strong>安卓Activity生命周期</strong></h1>
                <p style="color: gray; font-size: 14px">By Mr.Dai</p>
                <p style="color: gray; font-size:14px;">05 Mar 2015</p>
                <!-- content begins here -->
                <script type="text/javascript" src="/js/syntaxhighlighters/shBrushJava.js"></script>

<h2 class="jump">背景</h2>
<p>对于自学Android的读者来说，以下这幅关于Activity生命周期的图应该是很熟悉了：</p>
<p class="center"><img alt="" src="/img/activity-lifecycle@1.png"></p>
<p>
如果并没有经过系统的学习，对于onPause()和onStop之间，Activity是否visible的定义在上图中是模糊的，因此很容易被其他本身也不太了解的博主所误导。
</p>
<h2 class="jump">Activity生命状态与状态转换</h2>
<p>
    通过翻查谷歌API，实际上在Activity类的Overview里，谷歌已经对Activity的生命周期做了很详尽的阐述：
</p>
<blockquote>
 <p>An activity has essentially four states:</p>
 <ul>
     <li> If an activity in the foreground of the screen (at the top of
         the stack),
         it is <em>active</em> or  <em>running</em>. </li>
     <li>If an activity has lost focus but is still visible (that is, a new non-full-sized
         or transparent activity has focus on top of your activity), it
         is <em>paused</em>. A paused activity is completely alive (it
         maintains all state and member information and remains attached to
         the window manager), but can be killed by the system in extreme
         low memory situations.
     <li>If an activity is completely obscured by another activity,
         it is <em>stopped</em>. It still retains all state and member information,
         however, it is no longer visible to the user so its window is hidden
         and it will often be killed by the system when memory is needed
         elsewhere.</li>
     <li>If an activity is paused or stopped, the system can drop the activity
         from memory by either asking it to finish, or simply killing its
         process.  When it is displayed again to the user, it must be
         completely restarted and restored to its previous state.</li>
 </ul>
 <footer>http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle</footer>
</blockquote>
<p>对于这个大的生命周期循环图，谷歌也将其拆分为三个不同的循环周期：</p>
<blockquote>
<p>There are three key loops you may be interested in monitoring within your
 activity:

 <ul>
 <li>The <b>entire lifetime</b> of an activity happens between the first call
 to <code><a href="/reference/android/app/Activity.html#onCreate(android.os.Bundle)">onCreate(Bundle)</a></code> through to a single final call
 to <code><a href="/reference/android/app/Activity.html#onDestroy()">onDestroy()</a></code>.  An activity will do all setup
 of "global" state in onCreate(), and release all remaining resources in
 onDestroy().  For example, if it has a thread running in the background
 to download data from the network, it may create that thread in onCreate()
 and then stop the thread in onDestroy().

 <li>The <b>visible lifetime</b> of an activity happens between a call to
 <code><a href="/reference/android/app/Activity.html#onStart()">onStart()</a></code> until a corresponding call to
 <code><a href="/reference/android/app/Activity.html#onStop()">onStop()</a></code>.  During this time the user can see the
 activity on-screen, though it may not be in the foreground and interacting
 with the user.  Between these two methods you can maintain resources that
 are needed to show the activity to the user.  For example, you can register
 a <code><a href="/reference/android/content/BroadcastReceiver.html">BroadcastReceiver</a></code> in onStart() to monitor for changes
 that impact your UI, and unregister it in onStop() when the user no
 longer sees what you are displaying.  The onStart() and onStop() methods
 can be called multiple times, as the activity becomes visible and hidden
 to the user.

 <li>The <b>foreground lifetime</b> of an activity happens between a call to
 <code><a href="/reference/android/app/Activity.html#onResume()">onResume()</a></code> until a corresponding call to
 <code><a href="/reference/android/app/Activity.html#onPause()">onPause()</a></code>.  During this time the activity is
 in front of all other activities and interacting with the user.  An activity
 can frequently go between the resumed and paused states -- for example when
 the device goes to sleep, when an activity result is delivered, when a new
 intent is delivered -- so the code in these methods should be fairly
 lightweight.
 </ul>
 <footer>http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle</footer>
</blockquote>
<p>相信通过上面的描述，各位应该已经对Activity生命周期有了个全面的了解了。如果想对Activity有更深入的了解，我建议各位移步谷歌API继续进行学习</p>
<a href="http://developer.android.com/reference/android/app/Activity.html">http://developer.android.com/reference/android/app/Activity.html</a>
                <!-- and end here -->
    </div>
    </div>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/mrdai.js"></script>
    <script>SyntaxHighlighter.all()</script>
</body>
</html>