---
layout: post_original
title: Matlab学习笔记
author: Mr.Dai
categories: languages
---

<script type="text/javascript" src="/js/syntaxhighlighters/shBrushCpp.js"></script>

<h2 class="jump">课程内容：第一讲</h2>
<pre class="brush: cpp">
    sin(45*pi/180)      // sin以弧度为参数
    sqrt(4)             // 算术平方根
    exp(4)              // 以e为底的指数函数
    clc                 // 清除窗口
    radius=5.2;         // 为radius变量赋值。若不指明变量，所有计算结果默认赋值给ans变量
    who                 // 显示工作区内所有变量
    whos                // 显示工作区内所有变量及其详细信息
    clear radius ans    // 删除变量radius和ans
    dir                 // 显示当前工作目录及子目录
    cd                  // 显示或设置当前工作目录
    type                // 显示指定m文件内容
    help
    lookfor             // 获取简单帮助信息
    helpwin
    doc                 // 获取窗口式综合帮助信息
    quit
    exit                // 退出Matlab
    
    // 求解一元方程组
    p=[2,0,-3,71,-9,13]  // 2x5 - 3x3 + 71x2 - 9x + 13 = 0
    x = roots(p)
    
    // 求解线性方程组
    // 2x + 3y - z = 2
    // 8x + 2y + 3z = 4
    // 45x + 3y + 9z = 23
    a=[2,3,-1;8,2,3;45,3,9];
    b=[2;4;23];
    x=inv(a)*b      // inv对矩阵a求逆
    // 或者
    syms x y z
    [x,y,z]=solve(2*x+3*y-z-2,8*x+2*y+3*z-4,45*x+3*y+9*z-23)
    
    // 求定积分
    quad('x.*log(1+x)',0,1) // xln(1+x)dx，从0到1
    
    // 拟合
    // 给定二维数据
    x=[1,2,3,4,5,6,7,8,9,10]
    y=[1.2,3,4,4,5,4.7,5,5.2,6,7.2]
    // 线性拟合
    p1 = polyfit(x,y,1)
    // 三次拟合
    p3 = polyfit(x,y,3)
    // plot原始数据、线性拟合曲线和三次拟合曲线
    x2=1:0.1:10
    y1=polyval(p1,x2)
    y3=polyval(p3,x2) // polyval计算多项式 Y = P(1)*X^N + P(2)*X^(N-1) + ... + P(N)*X + P(N+1)
    plot(x,y,'*',x2,y1,':',x2,y3)
</pre>

<h2 class="jump">课程内容：第二讲</h2>
<pre class="brush: cpp">
    // Matlab变量默认为double类型
    // 常用变量
    ans     // 上次计算的结果
    eps     // 非负的极小值
    pi      // 圆周率
    inf     // 无穷大
    i j     // 单位虚数
    NaN     // 非数
    
    // 复数运算
    z1=3+4*i,z2=1+2*i,z3=exp(i*pi/6),z=z1*z2/z3
    z_real=real(z)      // 实部
    z_image=imag(z)     // 虚部
    z_angle=angle(z)    // 相位角
    z_length=abs(z)     // 模
    
    // 在Matlab中，数组被分为一位数组（向量）、二维数组（矩阵）和多维数组
    // 创建一位数组
    a=[1 3 pi 3+5*i]
    a=[1,3,pi,3+5*i]
    b=1:10
    c=1:2:9   // Start:Increment:End，Increment默认为1
    x=linspace(x1,x2,n) // 生成一个从x1到x2由n各元素组成的行向量，n默认为100
    x=logspace(x1,x2,n) // 从10^x1到10^x2生成n个对数相同的点，n默认为50
    v=[1;2;3]
    x=(1:3)'
    
    // 创建二维数组
    a2=[1,2,3;4,5,6;7,8,9]
    a2=[1:3;4:6;7:9]
    
    a=[1 2 3]; b=[2 3 4];
    c=[a;b];
    c1=[a b];
    
    ones // 生成全为1的矩阵
    zeros // 生成全为0的矩阵
    
    a=-4:4
    b=reshape(a,3,3)
    
    // 数组下标: a(2,3)代表二维数组a的第2行第3列
    // 单下标：a(2)代表二维数组所有列首尾相接后的第2个元素
    a([1 2 5]) // 由a的第1、2、5个元素组成的数组
    a(3:end) // 第3个及其后所有元素构成的子数组
    
    a(:)=-4:5
    a =
        -4 -2 0 2 4
        -3 -1 1 3 5
        
    a_2(:,[2 3])=ones(2)
    a_2 =
       1 1 1  7
      10 1 1 30
      
    a=ones(4,6)*6
    m=size(a) // size函数返回变量的大小，即变量数组的行，列数
    len=length(a)   // length函数返回变量数组的最大维数
    
    // sub2ind函数 -- 双下标转换为单下标
    A=[17 24 1 8; 2 22 7 14; 4 6 13 20];
    A(:,:,2)=A-10
    A(2,1,2) // = -8
    sub2ind(size(A),2,1,2) // = 14
    A(14) // = -8
    
    // ind2sub函数 -- 单下标转换为双下标
    b = zeros(3);
    b(:) = 1:9;
    IND = [3 4 5 6]
    [I,J]=ind2sub(size(b),IND)
    
    // 在Matlab中，所有维数超过2的数组均被视作多维数组
    // 将两个二维数组叠在一起，就构成了三维数组，第三维称为页
 
</pre>

<h3>数组的算术运算</h3>
<table class="table table-hover">
 <tr>
  <th>运算</th><th>运算符</th><th>含义说明</th>
 </tr>
 <tr>
  <td>加</td><td>+</td><td>相应元素相加</td>
 </tr>
 <tr>
  <td>减</td><td>-</td><td>相应元素相减</td>
 </tr>
 <tr>
  <td>乘</td><td>*</td><td>矩阵乘法</td>
 </tr>
 <tr>
  <td>点乘</td><td>.*</td><td>相应元素相乘</td>
 </tr>
 <tr>
  <td>幂</td><td>^</td><td>矩阵幂运算</td>
 </tr>
 <tr>
  <td>点幂</td><td>.^</td><td>响应元素进行幂运算</td>
 </tr>
 <tr>
  <td>左除或右除</td><td>\或/</td><td>矩阵左除或右除</td>
 </tr>
 <tr>
  <td>左点除或右点除</td><td>./或.\</td><td>对应元素相除</td>
 </tr>
</table>

<pre class="brush: cpp">
  // 画出y=1/(x+1)的函数曲线
  x=0:100
  y=1./(x+1);
  plot(x,y);
  legend('y=1/(x+1)');
  
  // rem函数取余
  A = [24,35,13,22,63;23,39,47,80,80;90,41,80,29,10;45,57,85,62,21;37,19,31,88,76]
  P = rem(A,3) == 0
</pre>

<h3>关系运算</h3>
<p>Matlab提供了6中关系运算符：&lt;、&gt;、&lt;=、&gt;=、==、~=</p>
<p>当两个标量进行比较时，直接比较两数大小。若关系成立，结果为1，否则为0。</p>
<p>当两个维数相等的矩阵进行比较时，其相应位置的元素按标量关系进行比较，并给出结果，形成一个维数与原来相同的0/1矩阵</p>
<p>当一个标量与一个矩阵比较时，该标量与矩阵的各元素进行比较，结果形成一个与矩阵维数相等的0/1矩阵。</p>

<h3>逻辑运算</h3>
<p>Matlab提供了3种逻辑运算符：&、|、~</p>
<p>在逻辑运算中，确认非零元素为真（1），零元素为假（0）</p>
<p>当两个维数相等的矩阵进行逻辑运算时，其相应位置的元素按标量关系进行运算，并给出结果，形成一个维数与原来相同的0/1矩阵</p>
<p>当一个标量与一个矩阵运算时，该标量与矩阵的各元素进行运算，结果形成一个与矩阵维数相等的0/1矩阵。</p>
<p>算术运算优先级最高，逻辑运算优先级最低。</p>

<pre class="brush: cpp">
  // 利用逻辑运算消去负半波
  x=0:pi/100:3*pi;
  y=sin(x);
  y1=(y>=0).*y;
  plot(x,y1);
  
  // find函数，找出矩阵中符合逻辑命题的元素的单坐标位置
  A=[4,15,-45,10,6;56,0,17,-45,0];
  find(A>=10 & A&lt;=20);
</pre>

<h3>数据分析与统计</h3>
<p>最大值与最小值：</p>
<pre class="brush: cpp">
  // 对于数组X
  y=max(X) // 返回向量X的最大值存入y，如果X中包含复数元素，则按模取最大值
  [y,I]=max(X) // 返回向量X的最大值存入y，最大值的序号存入I，如果X中包含复数元素，则按模取最大值。
  // 同理有最小值函数min
  y=min(X)
  [y,I]=min(x)
  
  // 对于矩阵X
  y=max(X) // 返回一个行向量，向量的第i个元素是矩阵X的第i列上的最大值；
  [Y,U]=max(X) // 返回行向量Y和U，Y向量记录X的每列的最大值，U向量记录每列最大值的行号；
  max(X,[],dim) // dim取1或2。dim取1时，该函数和max(X)完全相同；dim取2时，该函数返回一个列向量，其第i个元素是X矩阵的第i行上的最大值。
</pre>

<p>求和、求积、平均值、中值</p>
<table class="table table-hover">
<tr><th>函数</th><th>含义</th></tr>
<tr><td>sum(X)</td><td>返回向量X各元素的和</td></tr>
<tr><td>prod(X)</td><td>返回向量X各元素的乘积</td></tr>
<tr><td>sum(A)</td><td>返回一个行向量，其第i个元素是A的第i列的元素和</td></tr>
<tr><td>prod(A)</td><td>返回一个行向量，其第i个元素是A的第i列的元素乘积</td></tr>
<tr><td>sum(A,dim)</td><td>当dim为1时，该函数等同于sum(A)；当dim为2时，返回一个列向量，其第i个元素是A的第i行的各元素之和</td></tr>
<tr><td>prod(A,dim)</td><td>当dim为1时，该函数等同于prod(A)；当dim为2时，返回一个列向量，其第i个元素是A的第i行的各元素乘积</td></tr>
<tr><td>mean(X)</td><td>返回向量X的算术平均值</td></tr>
<tr><td>median(X)</td><td>返回向量X的中值</td></tr>
<tr><td>mean(A)</td><td>返回一个行向量，其第i个元素是A的第i列的算术平均值</td></tr>
<tr><td>median(A)</td><td>返回一个行向量，其第i个元素是A的第i列的中值</td></tr>
<tr><td>mean(A,dim)</td><td>当dim为1时，该函数等同于mean(A)；当dim为2时，返回一个列向量，其第i个元素是A的第i行的算术平均值</td></tr>
<tr><td>median(A,dim)</td><td>当dim为1时，该函数等同于median(A)；当dim为2时，返回一个列向量，其第i个元素是A的第i行的中值</td></tr>
</table>

<h2 class="jump">课程内容：第三讲</h2>
<h3>字符串</h3>
<pre class="brush: cpp">
  // Matlab 用单引号'来界定一个字符串
  // 可以使用方括号[ ]直接连接多个字符串变量，得到一个新字符串变量
  str1='I like MATLAB,';
  str2='JavaScript, and Perl!';
  str3=[str1 str2]
  
  // 如要输入的字符串中有单引号，则由两个连续的单引号来表示
  // 若要计算字符串变量的长度（即组成字符串的个数），可用 length 指令
  sentence='I''ve got a date!';
  length(sentence)
  
  // double 指令: 查看字符串变量的存储內容（即 ASCII 内码） 
  // char 指令: 将 ASCII 內码转换为字符串形式
  sentenceAscii=double(sentence)
  sentence2=char(sentenceAscii)
  
  // class 或 ischar 指令: 可以用来判断一个变量的类型或它是否为字符串变量
  out1=class(sentence)
  x=sentence+1
  out2=ischar(x)
</pre>


<h2 class="jump">课程内容：第四讲</h2>

<h2 class="jump">课程内容：第五讲</h2>
<p>图形标识包括：</p>
<ul>
 <li>图名（title）</li>
 <li>坐标轴名（xlabel、ylabel）</li>
 <li>图形文本注释（text）</li>
 <li>图例（legend）</li>
</ul>
<p>简介使用格式：</p>
<ul>
 <li>title(s)   % s为字符串常量或变量</li>
 <li>xlabel(s)</li>
 <li>ylabel(s)</li>
 <li>legend(s)</li>
 <li>text(x, y, s)  % 指定坐标(x,y)处加注文字</li>
</ul>
<br />
<p>字体样式设置：<p>
<p><span style="color: green">\fontname{</span>arg<span style="color: green">}</span><span style="color: blue">\arg</span><span style="color: red">\fontsize{</span>arg<span style="color: red">}</span> string</p>
<table class="table table-hover">
 <tr>
  <th></th><th>指令</th><th>arg取值</th><th>实例</th>
 </tr>
 <tr>
  <td>指定字体</td><td>\fontname{arg}</td><td>Arial<br/>宋体</td><td>'\fontname {'宋体'}'</td>
 </tr>
 <tr>
  <td>指定风格</td><td>\arg</td><td>Br(黑体)<br/>It 斜体1<br/>Sl 斜体2<br/>Rm 正体</td><td>'\bf example'</td>
 </tr>
 <tr>
  <td>指定大小</td><td>\fontsize{arg}</td><td>正整数（缺省10P）</td><td>'\fontsize {16} Example1 '</td>
 </tr>
</table>
<hr/>
<p>上下角标的控制：</p>
<table class="table table-hover">
 <tr>
  <th></th><th>指令</th><th>Arg取值</th>
 </tr>
 <tr>
  <td>上标</td><td>^{arg}</td><td>任何合法字符</td>
 </tr>
 <tr>
  <td>下标</td><td>_{arg}</td><td>任何合法字符</td>
 </tr>
</table>

<pre class="brush: cpp">
  // 例3.12 在正弦曲线上标注特殊值
  t=(0:100)/100*2*pi;
  y=sin(t);
  plot(t, y)
  text(3*pi/4,sin(3*pi/4), '\fontsize{16} \leftarrow sin(t) = .707')
  text(pi, sin(pi), '\fontsize{16} \leftarrow sin(t) = 0 ')
  text(5*pi/4, sin(5*pi/4), '\fontsize{16} sin(t) = -.707 \rightarrow','HorizontalAlignment','right')

  // 例3.13
  t = 0:900;
  plot(t,0.25*exp(-0.005*t))
  title('\fontsize{16} \it Ae^{ \alphat }');
  text(300,.25*exp(-0.005*300),'\fontsize{14}\leftarrow 0.25\ite^-0.005\itt at \itt = 300');
</pre>
<h3>柱状图指令bar</h3>
<pre class="brush: cpp">
  // 例3.15 柱状图
  x = -2.9:0.2:2.9;
  bar(x,exp(-x.*x),'r')

  // 例3.16 特殊柱状图
  year=[1990 1995 2000];
  people=[90.7 281.6 254.8; 70.6 271 323.7; 73.9 214.6 326.5];
  bar(year, people, 'stack');    // 累积式直方图
  legend('\fontsize{6}第一产业', '\fontsize{6}第二产业', '\fontsize{6}第三产业');
  
  bar(year, people, 'group');    // 分组式直方图

  barh(year, people, 'group');   // 分组式水平直方图
  
  barh(year, people, 'stack');   // 累积式水平直方图
</pre>
<h3>饼图指令pie</h3>
<p>饼图指令pie用来<span style="color: red">表示各元素占总和的百分数</span>。该指令第二输入变量是与第一变量同长的0-1向量，<span style="color: red">1</span>使对应扇块突出。</p>

<pre class="brush: cpp">
  a=[1,1.6,1.2,0.8,2.1];
  subplot(1,2,1), pie(a,[1 0 1 0 0]),     // 非0
  legend({'1','2','3','4','5'})
  subplot(1,2,2), b=int8(a==min(a))
  pie3(a,b)                               // 3维饼图
  colormap(cool)                          // 冷色调
  
  pie([2 4 3 5],{'North','South','East','West'})
</pre>
<h3>离散杆图stem</h3>
<pre class="brush: cpp">
  t = linspace(-2*pi, 2*pi, 20);
  h = stem(t,cos(t));
  
  // 例3.17 分别以条形图、填充图、阶梯图和杆图形式绘图
  x = 0:0.35:7;
  y = 2*exp(-0.5*x);
  subplot(221);
  bar(x,y,'g');
  title('bar(x,y,''g'')');
  axis([0,7,0,2]);
  subplot(222);
  fill(x,y,'r');
  title('fill(x,y,''r'')');
  axis([0,7,0,2]);
  subplot(223);
  stairs(x,y,'b');
  title('stairs(x,y,''b'')');
  axis([0,7,0,2]);
  subplot(224);
  stem(x,y,'k');
  title('stem(x,y,''k'')');
  axis([0,7,0,2]);
  
  // 例3.18 极坐标图
  theta = 0:0.01:2*pi;
  rho = sin(2*theta).*cos(2*theta);
  polar(theta,rho,'k');
</pre>
<h3>三维线图指令plot3</h3>
<p>三维绘图指令中，plot3最易于理解，它的使用格式与plot十分相似，只是对应第3 维空间的参量。</p>
<pre class="brush: cpp">
 t=(0:0.02:2)*pi;
 x=sin(t);
 y=cos(t);
 z=cos(2*t);
 plot3(x,y,z,'b-',x,y,z,'bd');
 view([-82,58]);
 box on
 legend('链','宝石') 
</pre>

<h3>三维网线图（mesh）和曲面图（surf）</h3>
<p>画函数z=f(x,y)所代表的三维空间曲面，需要做以下的数据准备工作：</p>
<pre class="brush: cpp">
 // 确定自变量的取值范围和取值间隔
 x=-4:4;
 y=x;
 // 利用MATLAB指令meshgrid产生“格点”矩阵
 [x,y]=meshgrid(x,y);
 // 计算格点上的函数值
 z=x.^2+y.^2;
 subplot(1,2,1);
 mesh(x,y,z);
 subplot(1,2,2);
 surf(x,y,z);
 colormap(hot);
</pre>

<h3>图像处理</h3>
<pre class="brush: cpp">
  img1=imread('mudan.jpg') // 读取图像文件
  imshow(img1) // 显示图片
  
  // 简单图像处理
  lighter=2*img1;
  subplot(1,2,1);
  imshow(img1);
  title('Original');
  subplot(1,2,2);
  imshow(lighter);
  title('Lighter');
  
  imwrite(lighter,'mysaved.jpg') // 保存图片
  
  black = rgb2gray(img1); // 转换为灰度图
  zoom on // 图片缩放
</pre>

<h2 class="jump">课程内容：第六讲</h2>


<h2 class="jump">二维矩阵降维</h2>
<p>可利用reshape函数</p>
<pre class="brush: cpp">
    matrix(1:3,1:3) = 1
    matrix = reshape(matrix', 1, [])
</pre>

<h2 class="jump">二维矩阵排序</h2>
<p>直接对二维矩阵使用sort函数只能逐行或逐列排序</p>
<p>解决方案：先用reshape函数降维，再用sort函数排序</p>
<pre class="brush: cpp">
    matrix = [ 1,2,3; 4,5,6; 7,8,9 ]
    matrix = reshape(matrix', 1, [])
    matrix = sort(matrix)
</pre>