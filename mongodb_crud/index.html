<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>MongoDB CRUD Cookbook - Robert Peng&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="呆呆的博客"><meta name="msapplication-TileImage" content="/img/avatar.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="呆呆的博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="This post is just a cookbook for me to look up all those MongoDB operations, so there won’t be too many basic concepts about MongoDB or advanced usage. I’ll try to make this post perfect for those who"><meta property="og:type" content="blog"><meta property="og:title" content="MongoDB CRUD Cookbook"><meta property="og:url" content="https://mr-dai.github.io/mongodb_crud/"><meta property="og:site_name" content="Robert Peng&#039;s Blog"><meta property="og:description" content="This post is just a cookbook for me to look up all those MongoDB operations, so there won’t be too many basic concepts about MongoDB or advanced usage. I’ll try to make this post perfect for those who"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://mr-dai.github.io/img/og_image.png"><meta property="article:published_time" content="2017-03-26T16:00:00.000Z"><meta property="article:modified_time" content="2017-03-26T16:00:00.000Z"><meta property="article:author" content="Robert Peng"><meta property="article:tag" content="MongoDB"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://mr-dai.github.io/mongodb_crud/"},"headline":"MongoDB CRUD Cookbook","image":["https://mr-dai.github.io/img/og_image.png"],"datePublished":"2017-03-26T16:00:00.000Z","dateModified":"2017-03-26T16:00:00.000Z","author":{"@type":"Person","name":"Robert Peng"},"publisher":{"@type":"Organization","name":"Robert Peng's Blog","logo":{"@type":"ImageObject","url":"https://mr-dai.github.io/img/avatar.png"}},"description":"This post is just a cookbook for me to look up all those MongoDB operations, so there won’t be too many basic concepts about MongoDB or advanced usage. I’ll try to make this post perfect for those who"}</script><link rel="canonical" href="https://mr-dai.github.io/mongodb_crud/"><link rel="icon" href="/img/avatar.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/avatar.png" alt="Robert Peng&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="我的 Github" href="https://github.com/Mr-Dai"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-03-26T16:00:00.000Z" title="3/26/2017, 4:00:00 PM">2017-03-27</time>发表</span><span class="level-item"><time dateTime="2017-03-26T16:00:00.000Z" title="3/26/2017, 4:00:00 PM">2017-03-27</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/MongoDB/">MongoDB</a></span></div></div><h1 class="title is-3 is-size-4-mobile">MongoDB CRUD Cookbook</h1><div class="content"><p>This post is just a cookbook for me to look up all those MongoDB operations, so there won’t be too many basic concepts about MongoDB or advanced usage. I’ll try to make this post perfect for those who don’t know MongoDB at all to get the hang of it as easily as possible.</p>
<p>In this post, I’ll show you MongoDB’s basic CRUD operations. Note that this post will not teach you how to install MongoDB on your computer or how to open its shell. For these basic usage, you should check out the official tutorial.</p>
<span id="more"></span>

<h2 id="What-is-MongoDB"><a href="#What-is-MongoDB" class="headerlink" title="What is MongoDB?"></a>What is MongoDB?</h2><p>So, first of all, what is MongoDB? I guess some of you may have already learned that MongoDB is a NoSQL database, it is somehow faster than traditional relational database like MySQL and Oracle, and maybe some of you even know that MongoDB store data in key-value pairs. But does it make sense? If it truly stores data in key-value pairs, then it probably looks just like the <code>HashMap</code> in Java. Is that a data structure that is good enough to support all those complex computations in relational database? Absolutely not, and MongoDB is absolutely more than that.</p>
<p>Before MongoDB, we know there are different types of database systems. Like there is distributed memory database like <code>Memcached</code>. Although Memcached has its remarkable performance, Memcached provides way less functions comparing to all those relational databases. Speaking of relational databases, MySQL provides lots of useful functionalities, like aggregation, <code>JOIN</code>, and support for transactions. But you may have already known that relational databases are pretty slow and they can hardly meet the requirement of high-performance computing like Big Data Processing.</p>
<p>After all these, here comes the MongoDB. Unlike Memcached and all those relational databases, MongoDB always try to strive a perfect balance between performance and functionality. You may have alreay known that MongoDB is much faster than relational database, but you still don’t know that MongoDB also provides lots of functions, which make it a totally sufficient substitution for all those relational databases.</p>
<h2 id="CRUD-C"><a href="#CRUD-C" class="headerlink" title="CRUD - C"></a>CRUD - C</h2><p>First of all, you have to know, MongoDB stores data in <code>JSON</code> format, and its shell operation bases on <code>JavaScript</code>. Instead of storing <em>records</em> in <em>tables</em> like relational database does, MongoDB stores data as <em>documents</em> in <em>collections</em>. So in this section, I’ll teach you how to insert documents into a collection.</p>
<h3 id="Inserting-Document"><a href="#Inserting-Document" class="headerlink" title="Inserting Document"></a>Inserting Document</h3><p>The following JavaScript code insert a document into a collection called <code>inventory</code>. If the collection does not exist, it will be created automatically.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">db.inverntory.insert(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">item</span>: <span class="string">&quot;ABC1&quot;</span>,</span><br><span class="line">        <span class="attr">details</span>: &#123;</span><br><span class="line">            <span class="attr">model</span>: <span class="string">&quot;14Q3&quot;</span>,</span><br><span class="line">            <span class="attr">manufacturer</span>: <span class="string">&quot;XYZ Company&quot;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">stock</span>: [ &#123; <span class="attr">size</span>: <span class="string">&quot;S&quot;</span>, <span class="attr">qty</span>: <span class="number">25</span> &#125;, &#123; <span class="attr">size</span>: <span class="string">&quot;M&quot;</span>, <span class="attr">qty</span>: <span class="number">50</span> &#125; ],</span><br><span class="line">        <span class="attr">category</span>: <span class="string">&quot;clothing&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>This <code>insert</code> method returns a <code>WriteResult</code> object with the status of the operation. A successful insertion of the document returns the following object:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WriteResuls(&#123; <span class="string">&quot;nInserted&quot;</span> : <span class="number">1</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>The <code>nInserted</code> field gives you the number of documents inserted by this operation. If the operation encounters an error, the <code>WriteResult</code> object will contain the error information.</p>
<h3 id="Inserting-an-Array-of-Documents"><a href="#Inserting-an-Array-of-Documents" class="headerlink" title="Inserting an Array of Documents"></a>Inserting an Array of Documents</h3><p>You can groups the documents you want to save into an array of JavaScript object, than <code>insert</code> the whole array:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myDocuments=</span><br><span class="line">    [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">item</span>: <span class="string">&quot;ABC2&quot;</span>,</span><br><span class="line">            <span class="attr">details</span>: &#123; <span class="attr">model</span>: <span class="string">&quot;14Q3&quot;</span>, <span class="attr">manufacturer</span>: <span class="string">&quot;M1 Corporation&quot;</span> &#125;,</span><br><span class="line">            <span class="attr">stock</span>: [ &#123; <span class="attr">size</span>: <span class="string">&quot;M&quot;</span>, <span class="attr">qty</span>: <span class="number">50</span> &#125; ],</span><br><span class="line">            <span class="attr">category</span>: <span class="string">&quot;clothing&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">item</span>: <span class="string">&quot;MNO2&quot;</span>,</span><br><span class="line">            <span class="attr">details</span>: &#123; <span class="attr">model</span>: <span class="string">&quot;14Q3&quot;</span>, <span class="attr">manufacturer</span>: <span class="string">&quot;ABC Company&quot;</span> &#125;,</span><br><span class="line">            <span class="attr">stock</span>: [ &#123; <span class="attr">size</span>: <span class="string">&quot;S&quot;</span>, <span class="attr">qty</span>: <span class="number">5</span> &#125;, &#123; <span class="attr">size</span>: <span class="string">&quot;M&quot;</span>, <span class="attr">qty</span>: <span class="number">5</span> &#125;, &#123; <span class="attr">size</span>: <span class="string">&quot;L&quot;</span>, <span class="attr">qty</span>: <span class="number">1</span> &#125; ],</span><br><span class="line">            <span class="attr">category</span>: <span class="string">&quot;clothing&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">item</span>: <span class="string">&quot;IJK2&quot;</span>,</span><br><span class="line">            <span class="attr">details</span>: &#123; <span class="attr">model</span>: <span class="string">&quot;14Q2&quot;</span>, <span class="attr">manufacturer</span>: <span class="string">&quot;M5 Corporation&quot;</span> &#125;,</span><br><span class="line">            <span class="attr">stock</span>: [ &#123; <span class="attr">size</span>: <span class="string">&quot;S&quot;</span>, <span class="attr">qty</span>: <span class="number">5</span> &#125;, &#123; <span class="attr">size</span>: <span class="string">&quot;L&quot;</span>, <span class="attr">qty</span>: <span class="number">3</span> &#125; ],</span><br><span class="line">            <span class="attr">category</span>: <span class="string">&quot;houseware&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ];</span><br><span class="line">db.inventory.insert(myDocuments);</span><br></pre></td></tr></table></figure>

<p>This method will return a <code>BulkWriteResult</code> object with the status of the operation. The result of a successful insertion of multiple documents might looks as follows:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">BulkWriteResult(&#123;</span><br><span class="line">    <span class="string">&quot;writeErrors&quot;</span> : [ ],</span><br><span class="line">    <span class="string">&quot;writeConcernErrors&quot;</span> : [ ],</span><br><span class="line">    <span class="string">&quot;nInserted&quot;</span> : <span class="number">3</span>,</span><br><span class="line">    <span class="string">&quot;nUpserted&quot;</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;nMatched&quot;</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;nModified&quot;</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;nRemoved&quot;</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;upserted&quot;</span> : [ ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Similarly, the <code>nInserted</code> field gives you the number of documents inserted. If the operation encounters an error, the error message will be given in the returned object.</p>
<h3 id="Inserting-Multiple-Documents-Using-Bulk-Operation"><a href="#Inserting-Multiple-Documents-Using-Bulk-Operation" class="headerlink" title="Inserting Multiple Documents Using Bulk Operation"></a>Inserting Multiple Documents Using Bulk Operation</h3><p>First, you need to use the following code to initialize a bulk operation:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bulk = db.inventory.initializeUnorderedBulkOp();</span><br></pre></td></tr></table></figure>

<p>By “unordered opertion”, it means the execution order of the operations in the bulk is not important, and MongoDB can execute all these operations in parallel. If an error occurs when processing one of the write operations, MongoDB will continue to process the remaining write operations.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">bulk.insert(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">item</span>: <span class="string">&quot;BE10&quot;</span>,</span><br><span class="line">        <span class="attr">details</span>: &#123; <span class="attr">model</span>: <span class="string">&quot;14Q2&quot;</span>, <span class="attr">manufacturer</span>: <span class="string">&quot;XYZ Company&quot;</span> &#125;,</span><br><span class="line">        <span class="attr">stock</span>: [ &#123; <span class="attr">size</span>: <span class="string">&quot;L&quot;</span>, <span class="attr">qty</span>: <span class="number">5</span> &#125; ],</span><br><span class="line">        <span class="attr">category</span>: <span class="string">&quot;clothing&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line">bulk.insert(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">item</span>: <span class="string">&quot;ZYT1&quot;</span>,</span><br><span class="line">        <span class="attr">details</span>: &#123; <span class="attr">model</span>: <span class="string">&quot;14Q1&quot;</span>, <span class="attr">manufacturer</span>: <span class="string">&quot;ABC Company&quot;</span> &#125;,</span><br><span class="line">        <span class="attr">stock</span>: [ &#123; <span class="attr">size</span>: <span class="string">&quot;S&quot;</span>, <span class="attr">qty</span>: <span class="number">5</span> &#125;, &#123; <span class="attr">size</span>: <span class="string">&quot;M&quot;</span>, <span class="attr">qty</span>: <span class="number">5</span> &#125; ],</span><br><span class="line">        <span class="attr">category</span>: <span class="string">&quot;houseware&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line">bulk.execute();</span><br></pre></td></tr></table></figure>

<p>The <code>execute</code> method execute the operations specified in the bulk and returns a <code>BulkWriteResult</code> object.</p>
<h2 id="CRUD-R"><a href="#CRUD-R" class="headerlink" title="CRUD - R"></a>CRUD - R</h2><h3 id="Selecting-All-Documents-in-a-Collection"><a href="#Selecting-All-Documents-in-a-Collection" class="headerlink" title="Selecting All Documents in a Collection"></a>Selecting All Documents in a Collection</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123;&#125; );</span><br><span class="line">db.inventory.find();</span><br></pre></td></tr></table></figure>

<p>Both commands do the same thing.</p>
<h3 id="Specifying-Equality-Condition"><a href="#Specifying-Equality-Condition" class="headerlink" title="Specifying Equality Condition"></a>Specifying Equality Condition</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">type</span>: <span class="string">&quot;snacks&quot;</span> &#125; );</span><br></pre></td></tr></table></figure>

<h3 id="Specifying-Conditions-Using-Query-Operators"><a href="#Specifying-Conditions-Using-Query-Operators" class="headerlink" title="Specifying Conditions Using Query Operators"></a>Specifying Conditions Using Query Operators</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">type</span>: &#123; <span class="attr">$in</span>: [ <span class="string">&quot;food&quot;</span>, <span class="string">&quot;snacks&quot;</span> ] &#125; &#125; );</span><br></pre></td></tr></table></figure>

<p>Although you can express this query using the <code>$or</code> operator, use the <code>$in</code> operator rather than the <code>$or</code> operator when performing equality checks on the same field.</p>
<h3 id="Specifying-AND-Conditions"><a href="#Specifying-AND-Conditions" class="headerlink" title="Specifying AND Conditions"></a>Specifying AND Conditions</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">type</span>: <span class="string">&#x27;food&#x27;</span>, <span class="attr">price</span>: &#123; <span class="attr">$lt</span>: <span class="number">9.95</span> &#125; &#125; );</span><br></pre></td></tr></table></figure>

<h3 id="Specifying-OR-Conditions"><a href="#Specifying-OR-Conditions" class="headerlink" title="Specifying OR Conditions"></a>Specifying OR Conditions</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">$or</span>: [ &#123; <span class="attr">qty</span>: &#123; <span class="attr">$gt</span>: <span class="number">100</span> &#125; &#125;, &#123; <span class="attr">price</span>: &#123; <span class="attr">$lt</span>: <span class="number">9.95</span> &#125; &#125; ]</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="Specifying-AND-as-well-as-OR-Conditions"><a href="#Specifying-AND-as-well-as-OR-Conditions" class="headerlink" title="Specifying AND as well as OR Conditions"></a>Specifying AND as well as OR Conditions</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;food&quot;</span>,</span><br><span class="line">        <span class="attr">$or</span>: [ &#123; <span class="attr">qty</span>: &#123; <span class="attr">$gt</span>: <span class="number">100</span> &#125; &#125;, &#123; <span class="attr">price</span>: &#123; <span class="attr">$lt</span>: <span class="number">9.95</span> &#125; &#125; ]</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="Embedded-Documents"><a href="#Embedded-Documents" class="headerlink" title="Embedded Documents"></a>Embedded Documents</h3><p>As you may have already seen that documents can be hierarchical, meaning document contains documents, which is also called embedded documents. When the field holds an embedded document, a query can either specify an exact match on the embedded document or specify a match by individual fields in the embedded document using the <em>dot notation</em>.</p>
<h4 id="Exact-Match-on-the-Embedded-Document"><a href="#Exact-Match-on-the-Embedded-Document" class="headerlink" title="Exact Match on the Embedded Document"></a>Exact Match on the Embedded Document</h4><p>To specify an equality match on the whole embedded document, use the query document <code>&#123; &lt;field&gt;: &lt;value&gt; &#125;</code> where <code>&lt;value&gt;</code> is the document to match.</p>
<blockquote>
<p>Equality match on an embedded document requires an <em>exact</em> match of the specified <code>&lt;value&gt;</code>, <strong>including</strong> the field order.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">db.invntory.find(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">producer</span>:</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">company</span>: <span class="string">&quot;ABC123&quot;</span>,</span><br><span class="line">                <span class="attr">address</span>: <span class="string">&quot;123 Street&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="Equality-Match-on-Fields-within-an-Embedded-Document"><a href="#Equality-Match-on-Fields-within-an-Embedded-Document" class="headerlink" title="Equality Match on Fields within an Embedded Document"></a>Equality Match on Fields within an Embedded Document</h4><p>Use the <em>dot notation</em> to match by specific fields in an embedded document. Equality matches for specific fields in an embedded document will select documents in the collection  where the embedded document contains the specified fields with the specified values. The embedded document can contain additional fields.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="string">&quot;producer.company&quot;</span>: <span class="string">&quot;ABC123&quot;</span> &#125; );</span><br></pre></td></tr></table></figure>

<h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3><p>When the field holds an array, you can query for an exact array match or for specific values in the array. If the array contains embedded documents, you can query for specific fields in the embedded documents using <em>dot notation</em>.</p>
<p>If you specify multiple conditions using the <code>$elemMatch</code> operator, the array must contain at least one element that satisfies all the conditions.</p>
<p>If you specify multiple conditions without using the <code>$elemMatch</code> operator, then some combination of the array elements, not necessarily a single element, must satisfy all the conditions; i.e. different elements in the array can satisfy different parts of the conditions.</p>
<p>Consider an <code>inventory</code> collection that contains the following documents:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">5</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;aaa&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ]&#125;</span><br><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">6</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;bbb&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">9</span> ]&#125;</span><br><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">7</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;ccc&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">9</span>, <span class="number">5</span>, <span class="number">8</span> ]&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Exact-Match-on-an-Array"><a href="#Exact-Match-on-an-Array" class="headerlink" title="Exact Match on an Array"></a>Exact Match on an Array</h4><p>To specify an equality match on an array, use the query document <code>&#123; &lt;field&gt;: &lt;value&gt; &#125;</code> where <code>&lt;value&gt;</code> is the array to match.</p>
<blockquote>
<p>Equality matches on the array require an <em>exact</em> match of the specified <code>&lt;value&gt;</code>, <strong>including</strong> the element order.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">ratings</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ] &#125; );</span><br></pre></td></tr></table></figure>

<p>This operation returns the following document:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">5</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;aaa&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ]&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Matching-an-Array-Element"><a href="#Matching-an-Array-Element" class="headerlink" title="Matching an Array Element"></a>Matching an Array Element</h4><p>Equality matches can be specified to match only a single element in the array. These specifications match if the array contains at least <em>one</em> element with the specified value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">ratings</span> : <span class="number">5</span> &#125; );</span><br></pre></td></tr></table></figure>

<p>This operation returns the following documents:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">5</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;aaa&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ]&#125;</span><br><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">6</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;bbb&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">9</span> ]&#125;</span><br><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">7</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;ccc&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">9</span>, <span class="number">5</span>, <span class="number">8</span> ]&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Matching-a-Specific-Element-in-an-Array"><a href="#Matching-a-Specific-Element-in-an-Array" class="headerlink" title="Matching a Specific Element in an Array"></a>Matching a Specific Element in an Array</h4><p>Equality matches can be specified  to match an element with particular index using the <em>dot notation</em>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="string">&quot;ratings.0&quot;</span>: <span class="number">5</span> &#125; );</span><br></pre></td></tr></table></figure>

<p>This operation returns the following documents:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">5</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;aaa&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ]&#125;</span><br><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">6</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;bbb&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">9</span> ]&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Specifying-Multiple-Criteria-for-Array-Elements"><a href="#Specifying-Multiple-Criteria-for-Array-Elements" class="headerlink" title="Specifying Multiple Criteria for Array Elements"></a>Specifying Multiple Criteria for Array Elements</h4><p>You can use <code>$elemMatch</code> to specify multiple criteria on the elements of an array so that the returned documents<br>have at least one element in the array field satisfies all the specified criteria.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">ratings</span>: &#123; <span class="attr">$elemMatch</span>: &#123; <span class="attr">$gt</span>: <span class="number">5</span>, <span class="attr">$lt</span>: <span class="number">9</span> &#125; &#125; &#125; );</span><br></pre></td></tr></table></figure>

<p>This operation returns the following documents:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">5</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;aaa&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ]&#125;</span><br><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">7</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;ccc&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">9</span>, <span class="number">5</span>, <span class="number">8</span> ]&#125;</span><br></pre></td></tr></table></figure>

<p>The following code queries for documents whose <code>ratings</code> array contains elements that in some combination satisfy the query conditions;<br>e.g., one element satisfying the “greater than 5: condition while another element satisfying the “less than 9” condition, or a single element satisfying both:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">ratings</span>: &#123; <span class="attr">$gt</span>: <span class="number">5</span>, <span class="attr">$lt</span>: <span class="number">9</span> &#125; &#125; );</span><br></pre></td></tr></table></figure>

<p>This operation returns the following documents:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">5</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;aaa&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ]&#125;</span><br><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">6</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;bbb&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">9</span> ]&#125;</span><br><span class="line">&#123; <span class="attr">&quot;_id&quot;</span>: <span class="number">7</span>, <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;ccc&quot;</span>, <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">9</span>, <span class="number">5</span>, <span class="number">8</span> ]&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Array-of-Embedded-Documents"><a href="#Array-of-Embedded-Documents" class="headerlink" title="Array of Embedded Documents"></a>Array of Embedded Documents</h4><p>Consider that the <code>inventory</code> collection includes the following documents:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;_id&quot;</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;xyz&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;qty&quot;</span>: <span class="number">25</span>,</span><br><span class="line">        <span class="attr">&quot;price&quot;</span>: <span class="number">2.5</span>,</span><br><span class="line">        <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ],</span><br><span class="line">        <span class="attr">&quot;memos&quot;</span>: [ &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;on time&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;shipping&quot;</span> &#125;, &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;approved&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;billing&quot;</span> &#125; ]</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;_id&quot;</span>: <span class="number">101</span>,</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;fruit&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;jkl&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;qty&quot;</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">&quot;price&quot;</span>: <span class="number">4.25</span>,</span><br><span class="line">        <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">9</span> ],</span><br><span class="line">        <span class="attr">&quot;memos&quot;</span>: [ &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;on time&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;payment&quot;</span> &#125;, &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;delayed&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;shipping&quot;</span> &#125; ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>If you know the index of the embedded document, you can specify the criteria with the embedded document’s position using the <em>dot notation</em>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="string">&quot;memos.0.by&quot;</span>: <span class="string">&quot;shiping&quot;</span> &#125; );</span><br></pre></td></tr></table></figure>

<p>This operation returns the following document:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;_id&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;xyz&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;qty&quot;</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">&quot;price&quot;</span>: <span class="number">2.5</span>,</span><br><span class="line">    <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ],</span><br><span class="line">    <span class="attr">&quot;memos&quot;</span>: [ &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;on time&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;shipping&quot;</span> &#125;, &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;approved&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;billing&quot;</span> &#125; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>If you do not know the index position of the document in the array, concatenate the name of the array field, a dot (<code>.</code>) and the name of the field in the embedded document.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="string">&quot;memos.by&quot;</span>: <span class="string">&quot;shipping&quot;</span> &#125; );</span><br></pre></td></tr></table></figure>

<p>This operation returns the following documents:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;_id&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;xyz&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;qty&quot;</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">&quot;price&quot;</span>: <span class="number">2.5</span>,</span><br><span class="line">    <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ],</span><br><span class="line">    <span class="attr">&quot;memos&quot;</span>: [ &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;on time&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;shipping&quot;</span> &#125;, &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;approved&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;billing&quot;</span> &#125; ]</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;_id&quot;</span>: <span class="number">101</span>,</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;fruit&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;jkl&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;qty&quot;</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">&quot;price&quot;</span>: <span class="number">4.25</span>,</span><br><span class="line">    <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">9</span> ],</span><br><span class="line">    <span class="attr">&quot;memos&quot;</span>: [ &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;on time&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;payment&quot;</span> &#125;, &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;delayed&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;shipping&quot;</span> &#125; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Specify-Multiple-Criteria-for-Array-of-Documents"><a href="#Specify-Multiple-Criteria-for-Array-of-Documents" class="headerlink" title="Specify Multiple Criteria for Array of Documents"></a>Specify Multiple Criteria for Array of Documents</h4><p>Use <code>$elemMatch</code> operator to specify multiple criteria on an array of embedded documents.<br>Such operations only return documents that have at least one embedded document satisfies all the specified criteria.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">memos</span>:</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">$elemMatch</span>:</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">memo</span>: <span class="string">&quot;on time&quot;</span>,</span><br><span class="line">                        <span class="attr">by</span>: <span class="string">&quot;shipping&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>This operation returns the following document:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;_id&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;xyz&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;qty&quot;</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">&quot;price&quot;</span>: <span class="number">2.5</span>,</span><br><span class="line">    <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ],</span><br><span class="line">    <span class="attr">&quot;memos&quot;</span>: [ &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;on time&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;shipping&quot;</span> &#125;, &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;approved&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;billing&quot;</span> &#125; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The following example queries for documents whose <code>memos</code> array contains elements that in some combination satisfy the query conditions; e.g. one element satisfying the “field <code>memo</code> equal to <code>&#39;on time&#39;</code>“ condition and another element satisfying the “field <code>by</code> equal to <code>&#39;shipping&#39;</code>“ condition, or a single element satisfying both criteria:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find(</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;memos.memo&quot;</span>: <span class="string">&quot;on time&quot;</span>,</span><br><span class="line">        <span class="string">&quot;memos.by&quot;</span>: <span class="string">&quot;shipping&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>This query returns the following documents:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;_id&quot;</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;food&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;xyz&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;qty&quot;</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">&quot;price&quot;</span>: <span class="number">2.5</span>,</span><br><span class="line">    <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ],</span><br><span class="line">    <span class="attr">&quot;memos&quot;</span>: [ &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;on time&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;shipping&quot;</span> &#125;, &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;approved&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;billing&quot;</span> &#125; ]</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;_id&quot;</span>: <span class="number">101</span>,</span><br><span class="line">    <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;fruit&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;item&quot;</span>: <span class="string">&quot;jkl&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;qty&quot;</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">&quot;price&quot;</span>: <span class="number">4.25</span>,</span><br><span class="line">    <span class="attr">&quot;ratings&quot;</span>: [ <span class="number">5</span>, <span class="number">9</span> ],</span><br><span class="line">    <span class="attr">&quot;memos&quot;</span>: [ &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;on time&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;payment&quot;</span> &#125;, &#123; <span class="attr">&quot;memo&quot;</span>: <span class="string">&quot;delayed&quot;</span>, <span class="attr">&quot;by&quot;</span>: <span class="string">&quot;shipping&quot;</span> &#125; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Limiting-Fields-Returned-by-a-Query"><a href="#Limiting-Fields-Returned-by-a-Query" class="headerlink" title="Limiting Fields Returned by a Query"></a>Limiting Fields Returned by a Query</h3><p>The <em>projection</em> document limits the returned fields of matching documents. The projection document can specify inclusion or exclusion rules of fields.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.users.find(</span><br><span class="line">    &#123; <span class="attr">age</span>: &#123; <span class="attr">$gt</span>: <span class="number">18</span> &#125; &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="number">1</span>, <span class="attr">age</span>: <span class="number">1</span>, <span class="attr">id_</span>: <span class="number">0</span> &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>Projection operation has inclusive mode and exclusive mode, in which you can specify which fields to include and which fields to exclude respectively.</p>
<blockquote>
<p>You cannot specify inclusion rules and exclusion rules in one query, but you can exclude the <code>_id</code> field when you are using inclusion projections.</p>
</blockquote>
<h4 id="Returning-All-Fields-of-Matched-Documents"><a href="#Returning-All-Fields-of-Matched-Documents" class="headerlink" title="Returning All Fields of Matched Documents"></a>Returning All Fields of Matched Documents</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">type</span>: <span class="string">&#x27;food&#x27;</span> &#125; )</span><br></pre></td></tr></table></figure>

<h4 id="Returning-the-Specified-Fields-and-the-id-Field-Only"><a href="#Returning-the-Specified-Fields-and-the-id-Field-Only" class="headerlink" title="Returning the Specified Fields and the _id Field Only"></a>Returning the Specified Fields and the _id Field Only</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">type</span>: <span class="string">&#x27;food&#x27;</span> &#125;, &#123; <span class="attr">item</span>: <span class="number">1</span>, <span class="attr">qty</span>: <span class="number">1</span> &#125; )</span><br></pre></td></tr></table></figure>

<h4 id="Returning-Specified-Fields-Only-Inclusive-Mode"><a href="#Returning-Specified-Fields-Only-Inclusive-Mode" class="headerlink" title="Returning Specified Fields Only (Inclusive Mode)"></a>Returning Specified Fields Only (Inclusive Mode)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">type</span>: <span class="string">&#x27;food&#x27;</span> &#125;, &#123; <span class="attr">item</span>: <span class="number">1</span>, <span class="attr">qty</span>: <span class="number">1</span>, <span class="attr">_id</span>:<span class="number">0</span> &#125; )</span><br></pre></td></tr></table></figure>

<h4 id="Returning-All-But-the-Specified-Fields-Exclusive-Mode"><a href="#Returning-All-But-the-Specified-Fields-Exclusive-Mode" class="headerlink" title="Returning All But the Specified Fields (Exclusive Mode)"></a>Returning All But the Specified Fields (Exclusive Mode)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">type</span>: <span class="string">&#x27;food&#x27;</span> &#125;, &#123; <span class="attr">type</span>:<span class="number">0</span> &#125; )</span><br></pre></td></tr></table></figure>

<h4 id="Projection-on-Array-Fields"><a href="#Projection-on-Array-Fields" class="headerlink" title="Projection on Array Fields"></a>Projection on Array Fields</h4><p>For fields that contain arrays, MongoDB provides the following projection operators: <code>$elemMatch</code>, <code>$slice</code>, and <code>$</code>.</p>
<p>For example, consider the <code>inventory</code> collection contains the following document:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">&quot;_id&quot;</span> : <span class="number">5</span>, <span class="attr">&quot;type&quot;</span> : <span class="string">&quot;food&quot;</span>, <span class="attr">&quot;item&quot;</span> : <span class="string">&quot;aaa&quot;</span>, <span class="attr">&quot;ratings&quot;</span> : [ <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span> ] &#125;</span><br></pre></td></tr></table></figure>

<p>Then the following operation uses the <code>$slice</code> projection operator to return just the first two elements in the <code>ratings</code> array.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.find( &#123; <span class="attr">_id</span>: <span class="number">5</span> &#125;, &#123; <span class="attr">ratings</span>: &#123; <span class="attr">$slice</span>: <span class="number">2</span> &#125; &#125; )</span><br></pre></td></tr></table></figure>

<p><code>$elemMatch</code>, <code>$slice</code>, and <code>$</code> are the only way to project portions of an array. For instance, you cannot project a portion of an array using the array index; e.g. <code>&#123; &quot;ratings.0&quot;: 1 &#125;</code> is not equivalent to returning just the first element of the array field.</p>
<h2 id="CRUD-U"><a href="#CRUD-U" class="headerlink" title="CRUD - U"></a>CRUD - U</h2><p>MongoDB provides the <code>update()</code> method to update the documents of a collection. This method accepts the following parameters:</p>
<ul>
<li>an update conditions document to match the documents to update,</li>
<li>an update operations document to specify the modification to perform, and</li>
<li>an options document.</li>
</ul>
<p class="info">
    To specify the update condition, use the same structure and syntax as the query conditions.
</p>

<h3 id="Updating-Specific-Fields-in-a-Document"><a href="#Updating-Specific-Fields-in-a-Document" class="headerlink" title="Updating Specific Fields in a Document"></a>Updating Specific Fields in a Document</h3><h4 id="Using-update-operators-to-change-field-values"><a href="#Using-update-operators-to-change-field-values" class="headerlink" title="Using update operators to change field values"></a>Using update operators to change field values</h4><p>The following code uses the <code>$set</code> operator to update the <code>category</code> field and the  <code>details</code> field to the specified values and the <code>$currentDate</code> operator to update the field <code>lastModified</code> with the current date for the document with <code>item</code> equal to <code>&quot;MNO2&quot;</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.update(</span><br><span class="line">    &#123; <span class="attr">item</span>: <span class="string">&quot;MNO2&quot;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">$set</span>: &#123;</span><br><span class="line">            <span class="attr">category</span>: <span class="string">&quot;apparel&quot;</span>,</span><br><span class="line">            <span class="attr">details</span>: &#123; <span class="attr">model</span>: <span class="string">&quot;14Q3&quot;</span>, <span class="attr">manufacturer</span>: <span class="string">&quot;XYZ Company&quot;</span> &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">$currentDate</span>: &#123; <span class="attr">lastModified</span>: <span class="literal">true</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>The update operation returns a <code>WriteResult</code> object which contains the status of the operation. A successful update of document returns the following object:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WriteResult(&#123; <span class="string">&quot;nMatched&quot;</span> : <span class="number">1</span>, <span class="string">&quot;nUpserted&quot;</span> : <span class="number">0</span>, <span class="string">&quot;nModified&quot;</span> : <span class="number">1</span> &#125;)</span><br></pre></td></tr></table></figure>

<p>The <code>nMatched</code> field specifies the number of existing documents matched for the update, and <code>nModified</code> specifies the number of existing documents modified.</p>
<h4 id="Updating-an-embedded-field"><a href="#Updating-an-embedded-field" class="headerlink" title="Updating an embedded field"></a>Updating an embedded field</h4><p>To update a field within an embedded document, use the <em>dot notation</em>. When using the dot notation, enclose the whole dotted field name in quotes.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.update(</span><br><span class="line">    &#123; <span class="attr">item</span>: <span class="string">&quot;ABC1&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">$set</span>: &#123; <span class="string">&quot;details.model&quot;</span>: <span class="string">&quot;14Q2&quot;</span> &#125; &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="Updating-multiple-documents"><a href="#Updating-multiple-documents" class="headerlink" title="Updating multiple documents"></a>Updating multiple documents</h4><p>By default, the <code>update()</code> method updates a single document. To update multiple documents, use the <code>multi</code> option in the <code>update()</code> method.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.update(</span><br><span class="line">    &#123; <span class="attr">category</span>: <span class="string">&quot;clothing&quot;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">$set</span>: &#123; <span class="attr">category</span>: <span class="string">&quot;apparel&quot;</span> &#125;,</span><br><span class="line">        <span class="attr">$currentDate</span>: &#123; <span class="attr">lastModified</span>: <span class="literal">true</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">multi</span>: <span class="literal">true</span> &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="Replacing-the-Whole-Document"><a href="#Replacing-the-Whole-Document" class="headerlink" title="Replacing the Whole Document"></a>Replacing the Whole Document</h3><p>To replace the entire content of a document except for the <code>_id</code> field, pass an entirely new document as the second argument to <code>update()</code>.</p>
<blockquote>
<p>The replacement document can have different fields than the original document. In the replacement document, you can omit the <code>_id</code> field since the <code>_id</code> field is immutable. If you do include the <code>_id</code> field, it must be the same value as  the existing value.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.update(</span><br><span class="line">    &#123; <span class="attr">item</span>: <span class="string">&quot;BE10&quot;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">item</span>: <span class="string">&quot;BE05&quot;</span>,</span><br><span class="line">        <span class="attr">stock</span>: [ &#123; <span class="attr">size</span>: <span class="string">&quot;S&quot;</span>, <span class="attr">qty</span>: <span class="number">20</span> &#125;, &#123; <span class="attr">size</span>: <span class="string">&quot;M&quot;</span>, <span class="attr">qty</span>: <span class="number">5</span> &#125; ],</span><br><span class="line">        <span class="attr">category</span>: <span class="string">&quot;apparel&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="The-upsert-Option"><a href="#The-upsert-Option" class="headerlink" title="The upsert Option"></a>The upsert Option</h3><p>By default, if no document matches the update query, the <code>update()</code> method does nothing.</p>
<p>However, by specifying <code>upsert: true</code>, the <code>update()</code> method either updates matching document or documents, or inserts a new document using the update specification if no matching document exists.</p>
<h4 id="Specifying-upsert-true-in-a-Document-Replacement-Operation"><a href="#Specifying-upsert-true-in-a-Document-Replacement-Operation" class="headerlink" title="Specifying upsert: true in a Document Replacement Operation"></a>Specifying <code>upsert: true</code> in a Document Replacement Operation</h4><p>When you specify <code>upsert: true</code> for an update operation to replace a document and no matching documents are found, MongoDB creates a new document using the equality conditions in the update conditions document, and replaces this document, except for the <code>_id</code> field if specified, with the update document. </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.update(</span><br><span class="line">    &#123; <span class="attr">item</span>: <span class="string">&quot;TBD1&quot;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">item</span>: <span class="string">&quot;TBD1&quot;</span>,</span><br><span class="line">        <span class="attr">details</span>: &#123; <span class="string">&quot;model&quot;</span> : <span class="string">&quot;14Q4&quot;</span>, <span class="string">&quot;manufacturer&quot;</span> : <span class="string">&quot;ABC Company&quot;</span> &#125;,</span><br><span class="line">        <span class="attr">stock</span>: [ &#123; <span class="string">&quot;size&quot;</span> : <span class="string">&quot;S&quot;</span>, <span class="string">&quot;qty&quot;</span> : <span class="number">25</span> &#125; ],</span><br><span class="line">        <span class="attr">category</span>: <span class="string">&quot;houseware&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">upsert</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>The update operation returns a <code>WriteResult</code> object which contains the status of the operation, including whether the <code>db.collection.update()</code> method modified an existing document or added a new document.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">WriteResult(&#123;</span><br><span class="line">    <span class="string">&quot;nMatched&quot;</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;nUpserted&quot;</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;nModified&quot;</span> : <span class="number">0</span>,</span><br><span class="line">    <span class="string">&quot;_id&quot;</span> : ObjectId(<span class="string">&quot;53dbd684babeaec6342ed6c7&quot;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>The <code>nMatched</code> field shows that the operation matched 0 documents.</p>
<p>The <code>nUpserted</code> of 1 shows that the update added a document.</p>
<p>The <code>nModified</code> of 0 specifies that no existing documents were updated.</p>
<p>The <code>_id</code> field shows the generated <code>_id</code> field for the added document.</p>
<h4 id="Specifying-upsert-true-in-a-Field-Updating-Operation"><a href="#Specifying-upsert-true-in-a-Field-Updating-Operation" class="headerlink" title="Specifying upsert: true in a Field Updating Operation"></a>Specifying <code>upsert: true</code> in a Field Updating Operation</h4><p>When you specify <code>upsert: true</code> for an update operation that modifies specific fields and no matching documents are found, MongoDB creates a new document using the equality conditions in the update conditions document, and applies the modification as specified in the update document.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.update(</span><br><span class="line">    &#123; <span class="attr">item</span>: <span class="string">&quot;TBD2&quot;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">$set</span>: &#123;</span><br><span class="line">            <span class="attr">details</span>: &#123; <span class="string">&quot;model&quot;</span> : <span class="string">&quot;14Q3&quot;</span>, <span class="string">&quot;manufacturer&quot;</span> : <span class="string">&quot;IJK Co.&quot;</span> &#125;,</span><br><span class="line">            <span class="attr">category</span>: <span class="string">&quot;houseware&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">upsert</span>: <span class="literal">true</span> &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>The update operation also returns a <code>WriteResult</code> object.</p>
<h2 id="CRUD-D"><a href="#CRUD-D" class="headerlink" title="CRUD - D"></a>CRUD - D</h2><p>In MongoDB, you can use the <code>db.collection.remove()</code> method to remove documents from a collection. You can choose to remove all documents from a collection, remove documents that match given condition, or just remove a single document.</p>
<h3 id="Remove-All-Documents"><a href="#Remove-All-Documents" class="headerlink" title="Remove All Documents"></a>Remove All Documents</h3><p>To remove all documents from a collection (clearing the collection), pass an empty query document <code>&#123;&#125;</code> to the <code>remove()</code> method. Such operation will not remove the indexes.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.remove( &#123;&#125; )</span><br></pre></td></tr></table></figure>

<blockquote>
<p>To remove all documents from a collection, it may be more efficient to use the <code>drop()</code> method to drop the entire collection, including the indexes, and then recreate the collection and rebuild the indexes.</p>
</blockquote>
<h3 id="Removing-Documents-that-Match-Given-Condition"><a href="#Removing-Documents-that-Match-Given-Condition" class="headerlink" title="Removing Documents that Match Given Condition"></a>Removing Documents that Match Given Condition</h3><p>To remove the documents that match a deletion criteria, call the <code>remove()</code> method with the <code>&lt;query&gt;</code> parameter.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.remove( &#123; <span class="attr">type</span> : <span class="string">&quot;food&quot;</span> &#125; )</span><br></pre></td></tr></table></figure>

<p>To remove a single document, call the <code>remove()</code> method with the <code>justOne</code> parameter set to true or 1.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.inventory.remove( &#123; <span class="attr">type</span> : <span class="string">&quot;food&quot;</span> &#125;, <span class="number">1</span> )</span><br></pre></td></tr></table></figure>

<blockquote>
<p>To delete a single document sorted by some specified order, use the <code>findAndModify()</code>Specific Fields method.</p>
</blockquote>
</div><div class="article-licensing box"><div class="licensing-title"><p>MongoDB CRUD Cookbook</p><p><a href="https://mr-dai.github.io/mongodb_crud/">https://mr-dai.github.io/mongodb_crud/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Robert Peng</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2017-03-27</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2017-03-27</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/MongoDB/">MongoDB</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay-qrcode.png" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat-qrcode.png" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/mongodb_replica_set/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">MongoDB Replica Set</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/sql_reference/"><span class="level-item">SQL Reference</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://mr-dai.github.io/mongodb_crud/';
            this.page.identifier = 'mongodb_crud/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'robertpsblog' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="呆呆"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">呆呆</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国广州</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">49</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">9</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">35</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://www.zhihu.com/people/robert.peng" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="知乎" href="https://www.zhihu.com/people/robert.peng"><i class="fab fa-zhihu"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Mr-Dai"><i class="fab fa-github"></i></a></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Bash/"><span class="tag">Bash</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Bigtable/"><span class="tag">Bigtable</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GC/"><span class="tag">GC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Go/"><span class="tag">Go</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gradle/"><span class="tag">Gradle</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Groovy/"><span class="tag">Groovy</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HBase/"><span class="tag">HBase</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hadoop/"><span class="tag">Hadoop</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hive-ThriftServer/"><span class="tag">Hive ThriftServer</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JVM/"><span class="tag">JVM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MIT-6-824/"><span class="tag">MIT 6.824</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mesos/"><span class="tag">Mesos</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Paxos/"><span class="tag">Paxos</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Raft/"><span class="tag">Raft</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spark/"><span class="tag">Spark</span><span class="tag">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Spark-SQL/"><span class="tag">Spark SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SparkSQL/"><span class="tag">SparkSQL</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Windows/"><span class="tag">Windows</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Yarn/"><span class="tag">Yarn</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ZooKeeper/"><span class="tag">ZooKeeper</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/etcd/"><span class="tag">etcd</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%B8%BB%E4%BB%8E%E5%A4%87%E4%BB%BD/"><span class="tag">主从备份</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E5%85%B1%E8%AF%86/"><span class="tag">分布式共识</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E5%86%85%E5%AD%98/"><span class="tag">分布式内存</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8/"><span class="tag">分布式存储</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/"><span class="tag">分布式系统</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E8%AE%A1%E7%AE%97/"><span class="tag">分布式计算</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C/"><span class="tag">团队协作</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9B%86%E7%BE%A4%E8%B5%84%E6%BA%90%E8%B0%83%E5%BA%A6/"><span class="tag">集群资源调度</span><span class="tag">2</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#What-is-MongoDB"><span class="level-left"><span class="level-item">1</span><span class="level-item">What is MongoDB?</span></span></a></li><li><a class="level is-mobile" href="#CRUD-C"><span class="level-left"><span class="level-item">2</span><span class="level-item">CRUD - C</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Inserting-Document"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">Inserting Document</span></span></a></li><li><a class="level is-mobile" href="#Inserting-an-Array-of-Documents"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">Inserting an Array of Documents</span></span></a></li><li><a class="level is-mobile" href="#Inserting-Multiple-Documents-Using-Bulk-Operation"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">Inserting Multiple Documents Using Bulk Operation</span></span></a></li></ul></li><li><a class="level is-mobile" href="#CRUD-R"><span class="level-left"><span class="level-item">3</span><span class="level-item">CRUD - R</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Selecting-All-Documents-in-a-Collection"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">Selecting All Documents in a Collection</span></span></a></li><li><a class="level is-mobile" href="#Specifying-Equality-Condition"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">Specifying Equality Condition</span></span></a></li><li><a class="level is-mobile" href="#Specifying-Conditions-Using-Query-Operators"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">Specifying Conditions Using Query Operators</span></span></a></li><li><a class="level is-mobile" href="#Specifying-AND-Conditions"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">Specifying AND Conditions</span></span></a></li><li><a class="level is-mobile" href="#Specifying-OR-Conditions"><span class="level-left"><span class="level-item">3.5</span><span class="level-item">Specifying OR Conditions</span></span></a></li><li><a class="level is-mobile" href="#Specifying-AND-as-well-as-OR-Conditions"><span class="level-left"><span class="level-item">3.6</span><span class="level-item">Specifying AND as well as OR Conditions</span></span></a></li><li><a class="level is-mobile" href="#Embedded-Documents"><span class="level-left"><span class="level-item">3.7</span><span class="level-item">Embedded Documents</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Exact-Match-on-the-Embedded-Document"><span class="level-left"><span class="level-item">3.7.1</span><span class="level-item">Exact Match on the Embedded Document</span></span></a></li><li><a class="level is-mobile" href="#Equality-Match-on-Fields-within-an-Embedded-Document"><span class="level-left"><span class="level-item">3.7.2</span><span class="level-item">Equality Match on Fields within an Embedded Document</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Arrays"><span class="level-left"><span class="level-item">3.8</span><span class="level-item">Arrays</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Exact-Match-on-an-Array"><span class="level-left"><span class="level-item">3.8.1</span><span class="level-item">Exact Match on an Array</span></span></a></li><li><a class="level is-mobile" href="#Matching-an-Array-Element"><span class="level-left"><span class="level-item">3.8.2</span><span class="level-item">Matching an Array Element</span></span></a></li><li><a class="level is-mobile" href="#Matching-a-Specific-Element-in-an-Array"><span class="level-left"><span class="level-item">3.8.3</span><span class="level-item">Matching a Specific Element in an Array</span></span></a></li><li><a class="level is-mobile" href="#Specifying-Multiple-Criteria-for-Array-Elements"><span class="level-left"><span class="level-item">3.8.4</span><span class="level-item">Specifying Multiple Criteria for Array Elements</span></span></a></li><li><a class="level is-mobile" href="#Array-of-Embedded-Documents"><span class="level-left"><span class="level-item">3.8.5</span><span class="level-item">Array of Embedded Documents</span></span></a></li><li><a class="level is-mobile" href="#Specify-Multiple-Criteria-for-Array-of-Documents"><span class="level-left"><span class="level-item">3.8.6</span><span class="level-item">Specify Multiple Criteria for Array of Documents</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Limiting-Fields-Returned-by-a-Query"><span class="level-left"><span class="level-item">3.9</span><span class="level-item">Limiting Fields Returned by a Query</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Returning-All-Fields-of-Matched-Documents"><span class="level-left"><span class="level-item">3.9.1</span><span class="level-item">Returning All Fields of Matched Documents</span></span></a></li><li><a class="level is-mobile" href="#Returning-the-Specified-Fields-and-the-id-Field-Only"><span class="level-left"><span class="level-item">3.9.2</span><span class="level-item">Returning the Specified Fields and the _id Field Only</span></span></a></li><li><a class="level is-mobile" href="#Returning-Specified-Fields-Only-Inclusive-Mode"><span class="level-left"><span class="level-item">3.9.3</span><span class="level-item">Returning Specified Fields Only (Inclusive Mode)</span></span></a></li><li><a class="level is-mobile" href="#Returning-All-But-the-Specified-Fields-Exclusive-Mode"><span class="level-left"><span class="level-item">3.9.4</span><span class="level-item">Returning All But the Specified Fields (Exclusive Mode)</span></span></a></li><li><a class="level is-mobile" href="#Projection-on-Array-Fields"><span class="level-left"><span class="level-item">3.9.5</span><span class="level-item">Projection on Array Fields</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#CRUD-U"><span class="level-left"><span class="level-item">4</span><span class="level-item">CRUD - U</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Updating-Specific-Fields-in-a-Document"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">Updating Specific Fields in a Document</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Using-update-operators-to-change-field-values"><span class="level-left"><span class="level-item">4.1.1</span><span class="level-item">Using update operators to change field values</span></span></a></li><li><a class="level is-mobile" href="#Updating-an-embedded-field"><span class="level-left"><span class="level-item">4.1.2</span><span class="level-item">Updating an embedded field</span></span></a></li><li><a class="level is-mobile" href="#Updating-multiple-documents"><span class="level-left"><span class="level-item">4.1.3</span><span class="level-item">Updating multiple documents</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Replacing-the-Whole-Document"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">Replacing the Whole Document</span></span></a></li><li><a class="level is-mobile" href="#The-upsert-Option"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">The upsert Option</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Specifying-upsert-true-in-a-Document-Replacement-Operation"><span class="level-left"><span class="level-item">4.3.1</span><span class="level-item">Specifying upsert: true in a Document Replacement Operation</span></span></a></li><li><a class="level is-mobile" href="#Specifying-upsert-true-in-a-Field-Updating-Operation"><span class="level-left"><span class="level-item">4.3.2</span><span class="level-item">Specifying upsert: true in a Field Updating Operation</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#CRUD-D"><span class="level-left"><span class="level-item">5</span><span class="level-item">CRUD - D</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Remove-All-Documents"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">Remove All Documents</span></span></a></li><li><a class="level is-mobile" href="#Removing-Documents-that-Match-Given-Condition"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">Removing Documents that Match Given Condition</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/avatar.png" alt="Robert Peng&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2021 Robert Peng</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="我的 Github" href="https://github.com/Mr-Dai"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>